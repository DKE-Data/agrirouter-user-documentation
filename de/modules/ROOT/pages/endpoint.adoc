:imagesdir: _images/
:icons: font

= Kontrollzentrum

Im Kontrollzentrum erstellst und verwaltest du Endpunkte image:one_bk.icon.png[one, 30, 30], Gruppen image:two_bk.icon.png[two, 30, 30] und die Regeln zum Datenaustausch image:three_bk.icon.png[three, 30, 30]. Links im Kontrollzentrum befinden sich die Endpunkte- und die Gruppenliste image:four_bk.icon.png[four, 30, 30], rechts befindet sich die Detailansicht image:five_bk.icon.png[five, 30, 30], in der Informationen zum gewählten Endpunkt und zur gewählten Gruppe angezeigt werden.

image::ar_control-center.legend.png[Control Center Overview]


== Endpunkt-Typ
Sender und Empfänger von Daten werden über den agrirouter miteinander verbunden. Für jeden verbundenen Sender und Empfänger wird im agrirouter ein Endpunkt des passenden Typs angelegt.
Es gibt folgende Endpunkt-Typen:

[unordered.stack]
Telemetrie-Einheit:: Meist ein auf dem Traktor oder an der Maschine verbautes Gerät zur Übertragung von Daten. Eine vollständige Liste von Telemetrie-Einheiten mit agrirouter-Schnittstelle findest du https://my-agrirouter.com/marketplace/telemetrieverbindungen[hier...^]

Maschine:: Eine angehängte, gezogene oder selbstfahrende landwirtschaftliche Maschine, die mit einer Telemetrie-Einheit verbunden ist und eine Device Description bereitstellen kann. Die Maschine kann, muss aber nicht ISOBUS-kompatibel sein.

Agrarsoftware:: Ackerschlagkarteien, Apps für Landwirte und Lohnunternehmer, herstellerspezifische Software für das Datenmanagement und viele mehr. Eine vollständige Liste von Agrarsoftware mit agrirouter-Schnittstelle findest du https://my-agrirouter.com/marketplace/agrarsoftware[hier...^]

Verbundenes Konto:: Das agrirouter-Konto eines anderen Benutzers.

Externe Maschine:: Maschine, die zu einem verbundenen Konto gehört.

image::ar_overview.png[Overview]

Jeder Endpunkt kann Daten senden und empfangen.
Die Endpunkte verknüpfst Du im agrirouter so miteinander, dass die Daten des Senders an die gewünschten Empfänger gelangen. (=> Kapitel xref:routing.adoc[Routing]).


== Endpunkteliste
[.float-group]
--
image::ar_endpoint-list.png[Endpoint list, 250, float=right]

Die Endpunkteliste ist anhand des Namens alphabetisch sortiert. + 
Du kannst

* einen Endpunkt hinzufügen,
* die Endpunkteliste filtern,
* einen Endpunkt suchen und
* die Endpunkteliste aktualisieren.
--

Öffne die Endpunkteliste wie folgt:

[.float-group]
--
image::ar_control-center-tile.png[Control Center Tile, 250, float=right]

. Klicke im Dashboard die Kachel *_Kontrollzentrum_*.
[.result]#Das Kontrollzentrum wird geöffnet.#
[.result]#Links wird die Endpunkteliste angezeigt.#
[.result]#Rechts wird die Detailansicht angezeigt.#
--

[NOTE]
====
Auf einem Tablet öffnest du die Endpunkteliste über das Burger-Menü:

. Klicke auf das Icon *_Burger-Menü_* image:ar_burger.icon.png[Burger menue, 30, 30].
[.result]#Die Endpunkteliste wird angezeigt.#

====

Ein Listeneintrag besteht aus

[.float-group]
--
image::ar_endpoint-item.legend.png[Endpoint list item, 400, float=right]

. Namen
. Typ
. Maschinenklasse (optional) und
. Status

--

=== Maschine verbinden
Eine Maschine benötigt zur Kommunikation mit der Außenwelt eine Telemetrie-Einheit. Die Telemetrie-Einheit verbindet die Maschine mit dem agrirouter. In der Endpunkteliste wird daher nicht die Maschine, sondern die Telemetrie-Einheit angezeigt. Du kannst aber den Namen des Listeneintrags ändern.

NOTE: Eine Ausnahme bilden ISOBUS-Maschinen. Es wird die Maschine in der Endpunkteliste angezeigt, nicht die Telemetrie-Einheit.

. Klicke den Button *_+ Telemetrie-Verbindung_*.
[.result]#Das Fenster `Telemetrie-Verbindung auswählen` wird angezeigt.#
. Wähle die Telemetrie-Verbindung.
[.result]#Das Meldungsfenster `Registrierungscode` wird angezeigt:#

image::ar_registration-code.png[Code]

[start=3]
. Notiere den Registrierungscode und klicke *_Schließen_*.
[.result]#Die Endpunkteliste wird angezeigt.#

[TIP]
Klicke auf das Icon *_Kopieren_* image:ar_copy.icon.png[copy, 30, 30], um den Code in die Zwischenablage zu kopieren. + 
Klicke auf das Icon *_Drucken_* image:ar_print.icon.png[print, 30, 30], um den Code auszudrucken.

[start=4]
. Gebe den Registrierungscode an der Telemetrie-Einheit ein.
. Klicke in der Endpunkteliste das Icon *_Aktualisieren_* image:ar_refresh.icon.png[refresh, 30, 30].
[.result]#Die Telemetrie-Einheit wird in der Endpunkteliste angezeigt.#
. Ändere den Namen wie im Abschnitt `Endpunkt bearbeiten` beschrieben.

NOTE: Lese in der Bedienungsanleitung des Herstellers nach, wie du den Registrierungscode an der Telemetrie-Einheit eingibst.

=== Agrarsoftware verbinden
Um eine Agrarsoftware mit dem agrirouter zu verbinden, gehe vor wie folgt:

. Starte die Agrarsoftware.
. Klicke den Button *_Mit agrirouter verbinden_*.
[.result]#Ein Formular wird angezeigt.#
. Gebe die Benutzerdaten deines agrirouter-Kontos ein.
[.result]#Die Agrarsoftware verbindet sich mit dem agrirouter.#
. Öffne das Kontrollzentrum im agrirouter und klicke in der Endpunkteliste das Icon *_Aktualisieren_* image:ar_refresh.icon.png[refresh, 30, 30].
[.result]#Die Agrarsoftware wird in der Endpunkteliste angezeigt.#

NOTE: Eine vollständige Liste von Agrarsoftware mit agrirouter-Schnittstelle findest du https://my-agrirouter.com/marketplace/agrarsoftware[hier...^]

TIP: Die Funktion *_Mit agrirouter verbinden_* findest du in der Agrarsoftware meist unter `Einstellungen`.

=== Konto verbinden
Verbinde dein Konto mit den Konten anderer Landwirte oder Lohnunternehmen und tausche Daten mit diesen aus. Die mit dem anderen Konto verbundenen Maschinen kannst du auch Daten senden oder Daten von diesen empfangen.

[.float-group]
--
image::ar_pairing-tile.png[Pairing tile, 250, float=right]

. Klicke im Dashboard die Kachel *_+ Konten verbinden_*.
[.result]#Das Fenster `Konten verbinden` wird angezeigt.#
. Gebe die E-Mail-Adresse des anderen Kontos in das Eingabefeld *_Email-Adresse_* ein.
. Gebe einen frei wählbaren Namen in das Eingabefeld *_Nickname_* ein.
. Klicke den Button *_Einladung versenden_*.
[.result]#Die Einladung wird im Reiter `Offene Einladungen` angezeigt.#
--

[NOTE]
Du kannst eine offene Einladung zurückziehen. + 
. Wähle im Reiter `Offene Einladungen` die Einladung.
[.result]#Der Listeneintrag wird grün eingefärbt.#
. Klicke den Button *_Einladung aufheben_*.

=== Endpunkt suchen
Wenn die Endpunkteliste viele Einträge enthält, kannst Du einen Enpunkt suchen:

. Klicke das Icon *_Suchen_* über der Endpunkteliste image:ar_search.icon.png[search, 30, 30].
[.result]#Der Cursor blinkt im Eingabefeld *_Suchen_*.#
. Gebe Name oder Maschinenklasse des gesuchten Endpunktes ein.
[.result]#Bereits beim Tippen wird die Endpunkteliste aktualisiert.#

Mache die Suche rückgängig wie folgt:

. Klicke das Icon image:ar_revert.icon.png[revert, 30, 30] rechts neben dem Eingabefeld *_Suchen_*.
[.result]#Alle Endpunkte werden angezeigt.#

=== Liste filtern
Die Liste kann nach vorgegebenen Kriterien gefiltert werden:

[unordered.stack]
Typ:: Die im Abschnitt `Endpunkt-Typ` beschriebenen Typen.
Status:: Ein Endpunkt kann den Status `Aktiv`, `Deaktiviert` oder `Blockiert` haben.
Maschinenklasse:: Einem Endpunkt vom Typ `Maschine` wird automatisch eine Maschinenklasse zugeordnet. Diese gibt an, um welche Art landwirtschaftliche Maschine es sich handelt, z.B. Dünger, Spritze, etc. ... .

//-

Filtere die Liste wie folgt:

. Klicke in der Endpunkteliste das Icon *_Endpunkt filtern_* image:ar_filter.icon.png[filter, 30, 30].
[.result]#Die Auswahlliste `Filtern nach` wird angezeigt.#
. Wähle eine Kategorie.
[.result]#Die Auswahlliste `Filtern nach: <Kategorie>` wird angezeigt.#
. Wähle eine Option und bestätige mit *_OK_*.
[.result]#Die gefilterte Endpunkteliste wird angezeigt.#

Setze den Filter zurück wie folgt:

. Klicke in der Endpunkteliste das Icon *_Endpunkt filtern_* image:ar_filter.icon.png[filter, 30, 30].
[.result]#Die Auswahlliste `Filtern nach` wird angezeigt.#
. Klicke das Icon *_Alle Filter zurücksetzen_*.
[.result]#Die Auswahlliste `Filtern nach` wird angezeigt.#
. Klicke *_OK_*.
[.result]#Alle Endpunkte werden angezeigt.#

=== Liste aktualisieren
Aktualisiere die Endpunkteliste, wenn der gesuchte Endpunkt nicht eingetragen ist:

. Klicke das Icon *_Aktualisieren_*  image:ar_refresh.icon.png[refresh, 30, 30] über der Endpunkteliste.
[.result]#Die Endpunkteliste wird aktualisiert.#

== Detailansicht
In der Detailansicht sind alle Informationen zum Endpunkt zusammengefasst:

* verbundene Endpunkte und Gruppen
* Details zum Endpunkt und dem Postfach
* Fähigkeiten des Endpunktes
// Mit Fähigkeiten sind die unterstützten Datenformate gemeint.

Die Detailansicht ist in folgende Reiter aufgeteilt:

[unordered.stack]
Senden an:: Die Endpunkte und Gruppen, an welche der Endpunkt Daten sendet.

Empfangen von:: Die Endpunkte und Gruppen, die Daten an den Endpunkt senden.

Gruppen:: Die Gruppen, denen der Endpunkt angehört.

Details:: Zusammenfassende Informationen zum Endpunkt und zum Postfach. + 
Die Endpunktdetails können mit Ausnahme der Beschreibung nicht geändert werden. Die Postfachdetails werden automatisch aktualisiert.

Fähigkeiten:: Der Reiter enthält die Nachrichtenformate, die der Endpunkt senden und empfangen kann. + 
Die unterstützten Nachrichtenformate sind vom Endpunkt vorgegeben und können nicht geändert werden.

=== Senden an
Empfänger sind alle Endpunkte und Gruppen, an welche der Endpunkt Daten sendet.
Der Reiter enthält eine Liste der Empfänger.
Du verwaltest die Liste der Empfänger und definierst, welche Nachrichtenformate die Empfänger erhalten.

NOTE: Jedem Endpunkt wird bei Erstellung automatisch eine Standard-Gruppe und ein Empfänger zugewiesen.
Wenn du die Standard-Gruppe löscht, wird automatisch auch der Empfänger gelöscht.

Füge einen neuen Empfänger hinzu wie folgt:

. Klicke das Icon *_Hinzufügen_*.
[.result]#Das Formular `Neues Routing` wird angezeigt.#
. Klicke in das Eingabefeld *_Empfänger_*.
[.result]#Die Auswahlliste `Endpunkt auswählen` wird angezeigt.#
. Wähle den Empfänger.
[.result]#Das Formular `Neues Routing` wird angezeigt.#
. Klicke in das Eingabefeld *_Nachrichtenformate_*.
[.result]#Die Auswahlliste `Nachrichtenformate auswählen` wird angezeigt.#
. Wähle die Nachrichtenformate, die der Empfänger erhalten soll und klicke *_Bestätigen_*.
[.result]#Das Formular `Neues Routing` wird angezeigt.#
. Klicke den Button *_Bestätigen_*.
[.result]#Der Empfänger wird hinzugefügt.#

#TODO: Das kann ich nicht nachstellen, weiß also nicht, was genau einzugeben ist#

. Klicke in das Eingabefeld *_Telemetrie-Parameter-Kategorien_*.
[.result]#Das Formular `Telemetrie-Parameter` wird angezeigt.#

NOTE: Es kann mehrere Minuten dauern, bis das System den Empfänger hinzugefügt hat.

[IMPORTANT]
====
Beachte beim Eingabefeld `Telemetrie-Parameter-Kategorien` folgende Einschränkungen:
Nur Gruppen und Maschinen können Telemetrie-Parameter versenden.
Der Empfänger muss Timelog-Nachrichten verarbeiten können.

Sind diese Bedingungen nicht erfüllt, ist das Eingabefeld deaktiviert.
====

=== Empfangen von
Sender sind alle Endpunkte und Gruppen, die Daten an den Endpunkt senden.
Der Reiter enthält eine Liste der Sender.
Du verwaltest die Liste der Sender und definierst, welche Nachrichtenformate der Endpunkt erhält.

NOTE: Jedem Endpunkt wird bei Erstellung automatisch eine Standard-Gruppe und ein Sender zugewiesen. Wenn du die Standard-Gruppe löscht, wird automatisch auch der Sender gelöscht.

Füge einen neuen Sender hinzu wie folgt:

. Klicke das Icon *_Hinzufügen_*.
[.result]#Das Formular `Neues Routing` wird angezeigt.#
. Klicke in das Eingabefeld *_Sender_*.
[.result]#Die Auswahlliste `Endpunkt auswählen` wird angezeigt.#
. Wähle den Sender.
[.result]#Das Formular `Neues Routing` wird angezeigt.#
. Klicke in das Eingabefeld *_Nachrichtenformate_*.
[.result]#Die Auswahlliste `Nachrichtenformate auswählen` wird angezeigt.#
. Wähle die Nachrichtenformate, die der Sender senden soll und klicke *_Bestätigen_*.
[.result]#Das Formular `Neues Routing` wird angezeigt.#
. Klicke den Button *_Bestätigen_*.
[.result]#Der Sender wird hinzugefügt.#

#TODO: Das kann ich nicht nachstellen, weiß also nicht, was genau einzugeben ist#

. Klicke in das Eingabefeld *_Telemetrie-Parameter-Kategorien_*.
[.result]#Das Formular `Telemetrie-Parameter` wird angezeigt.#

NOTE: Es kann mehrere Minuten dauern, bis das System den Sender hinzugefügt hat.

=== Gruppen
Fasse Endpunkte in Gruppen zusammen, z.B. nach Hersteller, Maschinentyp oder Maßnahme. Einstellungen, die du an der Gruppe vornimmst, gelten für alle Mitglieder der Gruppe. Es sind zwei Standard-Gruppen vorgegeben, welche du nicht löschen oder bearbeiten kannst.


=== Details
Ändere die Beschreibung des Endpunktes wie folgt:

. Klicke den Button *_Bearbeiten_*.
[.result]#Das Formular `Endpunkt bearbeiten` wird angezeigt.#
. Gebe die Beschreibung ein und klicke *_Bestätigen_*.
[.result]#Die neue Beschreibung wird angezeigt.#

Die Daten im Reiter werden automatisch aktualisiert.
Aktualisiere manuell, wenn du das Postfach auf eingehende oder verarbeitete Nachrichten überwachst:

. Klicke das Icon *_Aktualisieren_*  image:ar_refresh.icon.png[refresh, 30, 30].
[.result]#Der Reiter `Details` wird aktualisiert.#


== Endpunkt bearbeiten
Du kannst

* Name des Endpunktes ändern,
* den Endpunkt deaktivieren,
* den Endpunkt löschen und
* die Diagnoseinformationen eines Endpunktes abfragen.

Bearbeite den Endpunkt wie folgt:

. Wähle den Endpunkt in der Endpunkteliste.
[.result]#Im rechten Bereich des Kontrollzentrums wird die Detailansicht des Endpunktes angezeigt.#

=== Name ändern
Ändere den Namen des Endpunktes wie folgt:

. Klicke den Button *_Bearbeiten_*.
[.result]#Das Formular `Endpunkt bearbeiten` wird angezeigt.#
. Gebe den Namen ein und klicke *_Bestätigen_*.
[.result]#In der Endpunkteliste wird der neue Name angezeigt.#

////
.Namen oder Beschreibung bearbeiten
image::endpoint_change_name.png[Namen oder Beschreibung bearbeiten]
////

=== Deaktivieren
Wenn der Endpunkt keine Nachrichten mehr verarbeiten soll, deaktiviere ihn:

. Setze den Schalter *_Aktiv_* auf `AUS`.
[.result]#Der Endpunkt ist deaktiviert.#
[.result]#Der Endpunkt bleibt in der Endpunkteliste sichtbar.#

Wenn der Endpunkt Nachrichten empfangen oder versenden soll, aktiviere ihn:

. Wähle den Endpunkt in der Endpunkteliste.
[.result]#Die Details des Endpunktes werden rechts neben der Liste angezeigt.#
. Setze den Schalter *_Aktiv_* auf `AN`.
[.result]#Der Endpunkt ist aktiviert.#

////
.Endpunkt aktivieren oder deaktivieren
image::endpoint_activation.png[Endpunkt aktivieren oder deaktivieren]
////

=== Löschen
Wenn der Endpunkt nicht mehr benötigt wird, lösche ihn:

. Klicke den Button *_Löschen_*.
[.result]#Ein Meldungsfenster wird angezeigt.#
. Bestätige die Abfrage mit *_OK_*.
[.result]#Der Endpunkt wird gelöscht.#
[.result]#Der Endpunkt wird aus der Endpunkteliste entfernt.#
[.result]#Alle zum Endpunkt gehörenden Daten werden gelöscht.#

[NOTE]
====
Ein verbundenes Konto kann nicht gelöscht werden.
Entferne ein verbundenes Konto aus der Endpunkteliste wie folgt:

. Klicke im Dashboard die Kachel *_Konten verbinden_*.
. Wähle in der Liste der verbundenen Konten das Konto aus.
. Klicke den Button *_Verbindung aufheben_*.

====

////
.Endpunkt löschen
image::endpoint_delete.png[Endpunkt löschen]
////

=== Technischer Support
Wenn du zu einem Endpunkt eine Anfrage an unseren Support stellst, benötigen wir die Diagnoseinformationen des Endpunktes:

. Klicke das Icon *_Mehr_*.
[.result]#Eine Auswahlliste wird angezeigt.#
. Wähle das Icon *_Support Informationen anzeigen_*.
[.result]#Das Meldungsfenster *_Support-Information_* wird angezeigt.#
. Klicke das Icon *_In Zwischenablage kopieren_*.
. Kopiere die Diagnoseinformationen in eine E-Mail an unseren Support.
